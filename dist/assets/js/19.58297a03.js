(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{736:function(s,t,a){"use strict";a.r(t);var e=a(5),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"使用hub-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用hub-docker"}},[s._v("#")]),s._v(" 使用hub.docker")]),s._v(" "),a("h2",{attrs:{id:"地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#地址"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://docs.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("[toc]")]),s._v(" "),a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("📖 现在的hub好像并没有因为网路原因导致…….")]),s._v(" "),a("p",[s._v("🔦 所以目前我认为hub比阿里云更加合适当仓库")]),s._v(" "),a("p",[s._v("❗下面有分别推送windowns和Linux中的镜像到docker，请耐心看完")]),s._v(" "),a("h2",{attrs:{id:"使用commit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用commit"}},[s._v("#")]),s._v(" 使用commit")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('docker commit -m="vim cmd add ok" -a="nsddd" 08d1e4ac02f2  smile/myubuntu:1.0.0\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"设定端口映射"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设定端口映射"}},[s._v("#")]),s._v(" 设定端口映射")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -d -p 5000:5000 -v/zzyyuse/myregistry/:/tmp/registry --privileged=true registry\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("默认情况下，仓库被创建在容器的"),a("code",[s._v("/var/lib/registry")]),s._v("目录下面。建议自行用容器卷映射，方便宿主机联调")]),s._v(" "),a("p",[s._v("上面写的容器卷/zzyyuse/myregistry/ "),a("strong",[s._v("不写的话就用默认目录")])]),s._v(" "),a("p",[s._v("--privileged=ture 开启权限，开启动拥有真正的root权限")])]),s._v(" "),a("h2",{attrs:{id:"修改配置文件使docker支持http"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件使docker支持http"}},[s._v("#")]),s._v(" 修改配置文件使docker支持http")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cat /etc/docker/daemon.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("使用vim修改")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://ks0realz.mirror.aliyuncs.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"insecure-registries"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.111.167:5000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("docker默认不支持http方式推送镜像，通过配置选项来取消这个限制 ===> 修改完如果不生效，重启docker")])])]),s._v(" "),a("h2",{attrs:{id:"推送mysql到hub-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#推送mysql到hub-docker"}},[s._v("#")]),s._v(" 推送mysql到hub.docker")]),s._v(" "),a("blockquote",[a("p",[s._v("😄 windown下推送MySQL到win")])]),s._v(" "),a("h3",{attrs:{id:"先到hub上面搞一个开源的仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先到hub上面搞一个开源的仓库"}},[s._v("#")]),s._v(" 先到hub上面搞一个开源的仓库")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://sm.nsddd.top//typora/image-20220923201147595.png?mail:3293172751@qq.com",alt:"image-20220923201147595"}})]),s._v(" "),a("p",[a("strong",[s._v("注意右边的推送，我们打标签的时候要按照这个来打")])]),s._v(" "),a("p",[s._v("❗❗ "),a("code",[s._v("commit")]),s._v("提交是给我们自己在本地看的")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-a")]),s._v(" ：作者")]),s._v(" "),a("li",[a("code",[s._v("-m")]),s._v("：提交信息")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('docker commit -m "docker提交mysql" 55624332ddc6 smile/mysql:5.7\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("❗❗ "),a("code",[s._v("tag")]),s._v("打标签是提交hub的标志，一定要和远程的仓库对应，否则提交不上去")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" tag smile/mysql:5.7 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3293172751")]),s._v("/mysql5.7:5.7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("3293172751/mysql5.7:5.7")]),s._v("：分别对应我自己的账户还有仓库名，以及"),a("code",[s._v("tag")])])]),s._v(" "),a("p",[s._v("❗❗ 最后是"),a("code",[s._v("push")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" push "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3293172751")]),s._v("/mysql5.7:5.7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("❗❗ 远程记录")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://sm.nsddd.top//typora/image-20220923201741572.png?mail:3293172751@qq.com",alt:"image-20220923201741572"}})]),s._v(" "),a("h3",{attrs:{id:"docker-desktop上面推送"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-desktop上面推送"}},[s._v("#")]),s._v(" docker desktop上面推送")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://sm.nsddd.top//typora/image-20220923201633725.png?mail:3293172751@qq.com",alt:"image-20220923201633725"}})]),s._v(" "),a("p",[a("strong",[s._v("在desktop上面没有标签标志，还是需要打标签的！！！")])]),s._v(" "),a("blockquote",[a("p",[s._v("如果有标签可以直接推送")])]),s._v(" "),a("h2",{attrs:{id:"在ubuntu上面推送"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在ubuntu上面推送"}},[s._v("#")]),s._v(" 在Ubuntu上面推送")]),s._v(" "),a("p",[s._v("🐧 因为最近需要把电脑刷机，然后docker里面的数据都需要保存下来，一方面觉得映射到本地的文件好麻烦，可以选择"),a("code",[s._v("push")]),s._v("到远程仓库。")]),s._v(" "),a("p",[s._v("❗ 需要提交的镜像如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("root@ubuntu:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE              COMMAND                  CREATED        STATUS          PORTS                                              NAMES\n84b04bbb5c02   nginx              "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/docker-entrypoint.…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" days ago     Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v(" seconds   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:3344-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp, :::3344-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/tcp              nginx\n846fec372f81   mysql:5.7          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"docker-entrypoint.s…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" days ago     Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v(" seconds   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/tcp, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:3307-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp, :::3307-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp   mysql_beifena\nf19e7fbc3d18   v2fly/v2fly-core   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/v2ray -con…"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" months ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v(" seconds     \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://sm.nsddd.top//typora/image-20220923202155083.png?mail:3293172751@qq.com",alt:"image-20220923202155083"}})]),s._v(" "),a("h3",{attrs:{id:"登陆"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登陆"}},[s._v("#")]),s._v(" 登陆")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker login\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"mysql我们可以提交到同一个仓库-但是换个tag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysql我们可以提交到同一个仓库-但是换个tag"}},[s._v("#")]),s._v(" mysql我们可以提交到同一个仓库，但是换个tag")]),s._v(" "),a("p",[s._v("❗❗ "),a("code",[s._v("push")]),s._v(" 到本地")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('docker commit -m "commit mysql:5.7 ubuntu" -a "xiongxinwei" 846fec372f81 xiongxinwei/mysql:5.7 \n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("❗❗ "),a("code",[s._v("tag")]),s._v("打标签")]),s._v(" "),a("blockquote",[a("p",[s._v("我们把标签改为ubuntu，这样的话辨识度高，而且不需要创建多个仓库")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("tag xiongxinwei/mysql:5.7 3293172751/mysql5.7:ubuntu\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("❗❗ "),a("code",[s._v("push")]),s._v("推送")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker push  3293172751/mysql5.7:ubuntu\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);