(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{780:function(s,a,e){"use strict";e.r(a);var n=e(5),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker镜像命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像命令"}},[s._v("#")]),s._v(" docker镜像命令")]),s._v(" "),e("p",[s._v("[toc]")]),s._v(" "),e("h2",{attrs:{id:"镜像仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像仓库"}},[s._v("#")]),s._v(" 镜像仓库")]),s._v(" "),e("h3",{attrs:{id:"docker-login-logout-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-login-logout-命令"}},[s._v("#")]),s._v(" Docker login/logout 命令")]),s._v(" "),e("hr"),s._v(" "),e("p",[e("strong",[s._v("docker login :")]),s._v("  登陆到一个Docker镜像仓库，如果未指定镜像仓库地址，默认为官方仓库 Docker Hub")]),s._v(" "),e("p",[e("strong",[s._v("docker logout :")]),s._v("  登出一个Docker镜像仓库，如果未指定镜像仓库地址，默认为官方仓库 Docker Hub")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker login [OPTIONS] [SERVER]\ndocker logout [OPTIONS] [SERVER]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("OPTIONS说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-u :")]),s._v("  登陆的用户名")]),s._v(" "),e("li",[e("strong",[s._v("-p :")]),s._v("   登陆的密码")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("登陆到Docker Hub")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker login -u 用户名 -p 密码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("登出Docker Hub")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker logout\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"docker-pull-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-pull-命令"}},[s._v("#")]),s._v(" Docker pull 命令")]),s._v(" "),e("p",[e("strong",[s._v("docker pull :")]),s._v("  从镜像仓库中拉取或者更新指定镜像")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull [OPTIONS] NAME[:TAG|@DIGEST]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("OPTIONS说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-a :")]),s._v(" 拉取所有 "),e("code",[s._v("tagged")]),s._v(" 镜像")]),s._v(" "),e("li",[e("strong",[s._v("--disable-content-trust :")]),s._v(" 忽略镜像的校验,默认开启")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("从Docker Hub下载java最新版镜像。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull java\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("从Docker Hub下载REPOSITORY为java的所有镜像。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull -a java\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"docker-push-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-push-命令"}},[s._v("#")]),s._v(" Docker push 命令")]),s._v(" "),e("p",[e("strong",[s._v("docker push :")]),s._v("  将本地的镜像上传到镜像仓库,要先登陆到镜像仓库")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker push [OPTIONS] NAME[:TAG]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("OPTIONS说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("--disable-content-trust :")]),s._v(" 忽略镜像的校验,默认开启")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("上传本地镜像myapache:v1到镜像仓库中。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker push myapache:v1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"docker-search-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-search-命令"}},[s._v("#")]),s._v(" Docker search 命令")]),s._v(" "),e("p",[e("strong",[s._v("docker search :")]),s._v("  从Docker Hub查找镜像(一般使用"),e("code",[s._v("-f")]),s._v("筛选)")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker search [OPTIONS] TERM\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("OPTIONS说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("--automated :")]),s._v(" 只列出 automated build类型的镜像；")]),s._v(" "),e("li",[e("strong",[s._v("--no-trunc :")]),s._v(" 显示完整的镜像描述；")]),s._v(" "),e("li",[e("strong",[s._v("-f <过滤条件>:")]),s._v(" 列出收藏数不小于指定值的镜像。")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("从 Docker Hub 查找所有镜像名包含 java，并且收藏数大于 10 的镜像")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("runoob@runoob:~$ docker search -f stars=10 java\nNAME                  DESCRIPTION                           STARS   OFFICIAL   AUTOMATED\njava                  Java is a concurrent, class-based...   1037    [OK]       \nanapsix/alpine-java   Oracle Java 8 (and 7) with GLIBC ...   115                [OK]\ndevelar/java                                                 46                 [OK]\nisuper/java-oracle    This repository contains all java...   38                 [OK]\nlwieske/java-8        Oracle Java 8 Container - Full + ...   27                 [OK]\nnimmis/java-centos    This is docker images of CentOS 7...   13                 [OK]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("参数说明：")]),s._v(" "),e("p",[e("strong",[s._v("NAME:")]),s._v("  镜像仓库源的名称")]),s._v(" "),e("p",[e("strong",[s._v("DESCRIPTION:")]),s._v("  镜像的描述")]),s._v(" "),e("p",[e("strong",[s._v("OFFICIAL:")]),s._v("  是否 docker 官方发布")]),s._v(" "),e("p",[e("strong",[s._v("stars:")]),s._v("  类似 Github 里面的 star，表示点赞、喜欢的意思。")]),s._v(" "),e("p",[e("strong",[s._v("AUTOMATED:")]),s._v("  自动构建。")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("smile@ubuntu:~$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search -f "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stars")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" --limit "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" redis\nNAME                     DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nredis                    Redis is an "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" key-value store that…   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10891")]),s._v("     "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       \nbitnami/redis            Bitnami Redis Docker Image                      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("214")]),s._v("                  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbitnami/redis-sentinel   Bitnami Docker Image "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Redis Sentinel         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncircleci/redis           CircleCI images "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Redis                       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("                   "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbitnami/redis-exporter \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("hr"),s._v(" "),e("h2",{attrs:{id:"本地镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#本地镜像"}},[s._v("#")]),s._v(" 本地镜像")]),s._v(" "),e("h3",{attrs:{id:"docker-images-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-images-命令"}},[s._v("#")]),s._v(" Docker images 命令")]),s._v(" "),e("p",[e("strong",[s._v("docker images :")]),s._v("  列出本地镜像。")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker images [OPTIONS] [REPOSITORY[:TAG]]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("OPTIONS说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-a :")]),s._v(" 列出本地所有的镜像（含中间映像层，默认情况下，过滤掉中间映像层）；")]),s._v(" "),e("li",[e("strong",[s._v("--digests :")]),s._v(" 显示镜像的摘要信息；")]),s._v(" "),e("li",[e("strong",[s._v("-f :")]),s._v(" 显示满足条件的镜像；")]),s._v(" "),e("li",[e("strong",[s._v("--format :")]),s._v(" 指定返回值的模板文件；")]),s._v(" "),e("li",[e("strong",[s._v("--no-trunc :")]),s._v(" 显示完整的镜像信息；")]),s._v(" "),e("li",[e("strong",[s._v("-q :")]),s._v(" 只显示镜像ID。")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("查看本地镜像列表。")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("pepository:仓库")])]),s._v(" "),e("li",[e("strong",[s._v("tag:标签")])]),s._v(" "),e("li",[e("strong",[s._v("image id:镜像id（使用hash，是唯一的）")])]),s._v(" "),e("li",[e("strong",[s._v("created:时间")])]),s._v(" "),e("li",[e("strong",[s._v("size:镜像大小")])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("runoob@runoob:~$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\nREPOSITORY              TAG                 IMAGE ID            CREATED             SIZE\nmymysql                 v1                  37af1236adef        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" minutes ago       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("329")]),s._v(" MB\nrunoob/ubuntu           v4                  1c06aa18edee        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("142.1")]),s._v(" MB\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("                  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("              5c6e1090e771        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" days ago          "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("165.9")]),s._v(" MB\nhttpd                   latest              ed38aaffef30        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" days ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("195.1")]),s._v(" MB\nalpine                  latest              4e38e38c8ce0        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.799")]),s._v(" MB\nmongo                   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.2")]),s._v("                 282fd552add6        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("336.1")]),s._v(" MB\nredis                   latest              4465e4bcad80        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("185.7")]),s._v(" MB\nphp                     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),s._v("-fpm             025041cd3aa5        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("456.3")]),s._v(" MB\npython                  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.5")]),s._v("                 045767ddf24a        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("684.1")]),s._v(" MB\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("p",[s._v("列出本地镜像中REPOSITORY为ubuntu的镜像列表。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("root@runoob:~# docker images  ubuntu\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              14.04               90d5884b1ee0        9 weeks ago         188 MB\nubuntu              15.10               4e3b13c8a266        3 months ago        136.3 MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("blockquote",[e("p",[s._v("同一仓库源（mysql5.6\\5.7)可以有多个tag版本，代表这个仓库源的不同个版本，我们使用repository：tag来定义不同的镜像")])]),s._v(" "),e("h3",{attrs:{id:"docker-rmi-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-rmi-命令"}},[s._v("#")]),s._v(" Docker rmi 命令")]),s._v(" "),e("hr"),s._v(" "),e("p",[e("strong",[s._v("docker rmi :")]),s._v("  删除本地一个或多个镜像。")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker rmi [OPTIONS] IMAGE [IMAGE...]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("OPTIONS说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-f :")]),s._v(" 强制删除；")]),s._v(" "),e("li",[e("strong",[s._v("--no-prune :")]),s._v(" 不移除该镜像的过程镜像，默认移除；")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("强制删除本地镜像 runoob/ubuntu:v4。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("root@runoob:~# docker rmi -f runoob/ubuntu:v4\nUntagged: runoob/ubuntu:v4\nDeleted: sha256:1c06aa18edee44230f93a90a7d88139235de12cd4c089d41eed8419b503072be\nDeleted: sha256:85feb446e89a28d58ee7d80ea5ce367eebb7cec70f0ec18aa4faa874cbd97c73\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"docker-tag-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-tag-命令"}},[s._v("#")]),s._v(" Docker tag 命令")]),s._v(" "),e("hr"),s._v(" "),e("p",[e("strong",[s._v("docker tag :")]),s._v("  标记本地镜像，将其归入某一仓库。")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker tag [OPTIONS] IMAGE[:TAG] [REGISTRYHOST/][USERNAME/]NAME[:TAG]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("将镜像ubuntu:15.10标记为 runoob/ubuntu:v3 镜像。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("root@runoob:~# docker tag ubuntu:15.10 runoob/ubuntu:v3\nroot@runoob:~# docker images   runoob/ubuntu:v3\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nrunoob/ubuntu       v3                  4e3b13c8a266        3 months ago        136.3 MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"docker-build-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-build-命令"}},[s._v("#")]),s._v(" Docker build 命令")]),s._v(" "),e("p",[e("strong",[s._v("docker build")]),s._v(" 命令用于使用 Dockerfile 创建镜像。")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker build [OPTIONS] PATH | URL | -\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("OPTIONS说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("--build-arg=[] :")]),s._v(" 设置镜像创建时的变量；")]),s._v(" "),e("li",[e("strong",[s._v("--cpu-shares :")]),s._v(" 设置 cpu 使用权重；")]),s._v(" "),e("li",[e("strong",[s._v("--cpu-period :")]),s._v(" 限制 CPU CFS周期；")]),s._v(" "),e("li",[e("strong",[s._v("--cpu-quota :")]),s._v(" 限制 CPU CFS配额；")]),s._v(" "),e("li",[e("strong",[s._v("--cpuset-cpus :")]),s._v(" 指定使用的CPU id；")]),s._v(" "),e("li",[e("strong",[s._v("--cpuset-mems :")]),s._v("  指定使用的内存 id；")]),s._v(" "),e("li",[e("strong",[s._v("--disable-content-trust :")]),s._v(" 忽略校验，默认开启；")]),s._v(" "),e("li",[e("strong",[s._v("-f :")]),s._v(" 指定要使用的Dockerfile路径；")]),s._v(" "),e("li",[e("strong",[s._v("--force-rm :")]),s._v(" 设置镜像过程中删除中间容器；")]),s._v(" "),e("li",[e("strong",[s._v("--isolation :")]),s._v(" 使用容器隔离技术；")]),s._v(" "),e("li",[e("strong",[s._v("--label=[] :")]),s._v(" 设置镜像使用的元数据；")]),s._v(" "),e("li",[e("strong",[s._v("-m :")]),s._v(" 设置内存最大值；")]),s._v(" "),e("li",[e("strong",[s._v("--memory-swap :")]),s._v(' 设置Swap的最大值为内存+swap，"-1"表示不限swap；')]),s._v(" "),e("li",[e("strong",[s._v("--no-cache :")]),s._v(" 创建镜像的过程不使用缓存；")]),s._v(" "),e("li",[e("strong",[s._v("--pull :")]),s._v(" 尝试去更新镜像的新版本；")]),s._v(" "),e("li",[e("strong",[s._v("--quiet, -q :")]),s._v(" 安静模式，成功后只输出镜像 ID；")]),s._v(" "),e("li",[e("strong",[s._v("--rm :")]),s._v(" 设置镜像成功后删除中间容器；")]),s._v(" "),e("li",[e("strong",[s._v("--shm-size :")]),s._v(" 设置/dev/shm的大小，默认值是64M；")]),s._v(" "),e("li",[e("strong",[s._v("--ulimit :")]),s._v(" Ulimit配置。")]),s._v(" "),e("li",[e("strong",[s._v("--squash :")]),s._v(" 将 Dockerfile 中所有的操作压缩为一层。")]),s._v(" "),e("li",[e("strong",[s._v("--tag, -t:")]),s._v("  镜像的名字及标签，通常 name:tag 或者 name 格式；可以在一次构建中为一个镜像设置多个标签。")]),s._v(" "),e("li",[e("strong",[s._v("--network:")]),s._v("  默认 default。在构建期间设置RUN指令的网络模式")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("使用当前目录的 "),e("code",[s._v("Dockerfile")]),s._v(" 创建镜像，标签为 runoob/ubuntu:v1。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker build -t runoob/ubuntu:v1 . \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("使用URL "),e("strong",[s._v("github.com/creack/docker-firefox")]),s._v(" 的 Dockerfile 创建镜像。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker build github.com/creack/docker-firefox\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("也可以通过 -f Dockerfile 文件的位置：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker build -f /path/to/a/Dockerfile .\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("在 Docker 守护进程执行 "),e("code",[s._v("Dockerfile")]),s._v(" 中的指令前，首先会对 Dockerfile 进行语法检查，有语法错误时会返回：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker build -t test/myapp .\nSending build context to Docker daemon 2.048 kB\nError response from daemon: Unknown instruction: RUNCMD\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"docker-history-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-history-命令"}},[s._v("#")]),s._v(" Docker history 命令")]),s._v(" "),e("hr"),s._v(" "),e("p",[e("strong",[s._v("docker history :")]),s._v("  查看指定镜像的创建历史。")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker history [OPTIONS] IMAGE\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("OPTIONS说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-H :")]),s._v(" 以可读的格式打印镜像大小和日期，默认为true；")]),s._v(" "),e("li",[e("strong",[s._v("--no-trunc :")]),s._v(" 显示完整的提交记录；")]),s._v(" "),e("li",[e("strong",[s._v("-q :")]),s._v(" 仅列出提交记录ID。")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("查看本地镜像runoob/ubuntu:v3的创建历史。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("root@runoob:~# docker history runoob/ubuntu:v3\nIMAGE             CREATED           CREATED BY                                      SIZE      COMMENT\n4e3b13c8a266      3 months ago      /bin/sh -c #(nop) CMD [\"/bin/bash\"]             0 B                 \n<missing>         3 months ago      /bin/sh -c sed -i 's/^#\\s*\\(deb.*universe\\)$/   1.863 kB            \n<missing>         3 months ago      /bin/sh -c set -xe   && echo '#!/bin/sh' > /u   701 B               \n<missing>         3 months ago      /bin/sh -c #(nop) ADD file:43cb048516c6b80f22   136.3 MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"docker-save-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-save-命令"}},[s._v("#")]),s._v(" Docker save 命令")]),s._v(" "),e("p",[e("strong",[s._v("docker save :")]),s._v("  将指定镜像保存成 tar 归档文件。")]),s._v(" "),e("p",[e("strong",[s._v("语法")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker save [OPTIONS] IMAGE [IMAGE...]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("OPTIONS 说明：")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("-o :")]),s._v(" 输出到的文件。")])]),s._v(" "),e("p",[e("strong",[s._v("实例")])]),s._v(" "),e("p",[s._v("将镜像 runoob/ubuntu:v3 生成 my_ubuntu_v3.tar 文档")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("runoob@runoob:~$ docker save -o my_ubuntu_v3.tar runoob/ubuntu:v3\nrunoob@runoob:~$ ll my_ubuntu_v3.tar\n-rw------- 1 runoob runoob 142102016 Jul 11 01:37 my_ubuntu_v3.ta\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"_2-篇笔记"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-篇笔记"}},[s._v("#")]),s._v(" 2 篇笔记")]),s._v(" "),e("p",[e("strong",[s._v("docker prune 命令")])]),s._v(" "),e("p",[s._v("prune 命令用来删除不再使用的 docker 对象。")]),s._v(" "),e("p",[s._v("删除所有未被 tag 标记和未被容器使用的镜像:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker image prune\nWARNING! This will remove all dangling images.\nAre you sure you want to continue? [y/N] y\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("删除所有未被容器使用的镜像:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker image prune -a\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除所有停止运行的容器:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker container prune\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除所有未被挂载的卷:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker volume prune\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除所有网络:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker network prune\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除 docker 所有资源:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker system prune\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("docker system prune")]),s._v(" 命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("This will remove:\n        - all stopped containers\n        - all networks not used by at least one container\n        - all dangling images\n        - all dangling build cache\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("翻译：删除停止的容器、删除所有未被容器使用的网络、删除所有none的镜像。")])])}),[],!1,null,null,null);a.default=t.exports}}]);