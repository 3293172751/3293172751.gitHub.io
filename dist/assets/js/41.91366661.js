(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{758:function(s,a,t){"use strict";t.r(a);var e=t(5),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"host是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#host是什么"}},[s._v("#")]),s._v(" host是什么")]),s._v(" "),t("p",[s._v("[toc]")]),s._v(" "),t("p",[t("strong",[s._v("直接使用宿主机的 IP 地址与外界进行通信，不再需要额外进行NAT 转换。")])]),s._v(" "),t("p",[t("strong",[s._v("容器将不会获得一个独立的Network Namespace， 而是和宿主机共用一个Network Namespace。容器将不会虚拟出自己的网卡而是使用宿主机的IP和端口。")])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2022/05/14/cYQOLURN4Zagk7P.jpg",alt:"graphic"}})]),s._v(" "),t("p",[t("strong",[s._v("代码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker run -d -p 8083:8080 --network host --name tomcat83 billygoo/tomcat8-jdk8\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("警告：不太推荐使用，"),t("code",[s._v("-p参数不起任何作用，因为是和主机公用一个端口")])])]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2022/05/14/dBjgcHPhobA6XSC.png",alt:"image-20220514221324259"}})]),s._v(" "),t("h3",{attrs:{id:"问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[s._v("#")]),s._v(" 问题：")]),s._v(" "),t("p",[s._v("docke启动时总是遇见标题中的警告")]),s._v(" "),t("h3",{attrs:{id:"原因"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#原因"}},[s._v("#")]),s._v(" 原因：")]),s._v(" "),t("p",[t("strong",[s._v("docker启动时指定--network=host或-net=host，如果还指定了-p映射端口，那这个时候就会有此警告，")])]),s._v(" "),t("p",[t("strong",[s._v("并且通过-p设置的参数将不会起到任何作用，端口号会以主机端口号为主，重复时则递增。")])]),s._v(" "),t("h3",{attrs:{id:"解决"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[s._v("#")]),s._v(" 解决:")]),s._v(" "),t("p",[s._v("解决的办法就是使用docker的其他网络模式，例如"),t("code",[s._v("--network=bridge")]),s._v("，这样就可以解决问题，或者直接无视。。。。O(∩_∩)O哈哈~")]),s._v(" "),t("h3",{attrs:{id:"正确"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正确"}},[s._v("#")]),s._v(" 正确")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("docker run -d --network host --name tomcat83 billygoo/tomcat8-jdk8\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("无之前的配对显示了，看容器实例内部")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('root@ubuntu:/home/smile# docker inspect tomcat83 | tail -n 20\n            "Networks": {\n                "host": {\n                    "IPAMConfig": null,\n                    "Links": null,\n                    "Aliases": null,\n                    "NetworkID": "c68651290784a6ed6e11337383cdc7d808ed42393675ade0b5c94fa368c2c556",\n                    "EndpointID": "a228da421b411e51ada0066671c175938494c46a3915a67c5c3d24f05e73cf47",\n                    "Gateway": "",\n                    "IPAddress": "",\n                    "IPPrefixLen": 0,\n                    "IPv6Gateway": "",\n                    "GlobalIPv6Address": "",\n                    "GlobalIPv6PrefixLen": 0,\n                    "MacAddress": "",\n                    "DriverOpts": null\n                }\n            }\n        }\n    }\n]\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("p",[t("strong",[s._v("没有设置-p的端口映射了，如何访问启动的tomcat83？？")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(' "Gateway": "",\n "IPAddress": "",\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("http://宿主机IP:8080/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在CentOS里面用默认的火狐浏览器访问容器内的tomcat83看到访问成功，因为此时容器的IP借用主机的，")]),s._v(" "),t("p",[s._v("所以容器共享宿主机网络IP，这样的好处是外部主机与容器可以直接通信。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2022/05/14/z6RsQTM2k3AGBc1.png",alt:"image-20220514222936473"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);