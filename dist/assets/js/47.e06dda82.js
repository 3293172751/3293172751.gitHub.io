(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{762:function(s,t,e){"use strict";e.r(t);var n=e(5),a=Object(n.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"compose核心概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#compose核心概念"}},[s._v("#")]),s._v(" Compose核心概念")]),s._v(" "),e("p",[s._v("[toc]")]),s._v(" "),e("h3",{attrs:{id:"一文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一文件"}},[s._v("#")]),s._v(" 一文件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker-compose.yml\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"两要素"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#两要素"}},[s._v("#")]),s._v(" 两要素")]),s._v(" "),e("h5",{attrs:{id:"服务-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务-service"}},[s._v("#")]),s._v(" 服务（service）")]),s._v(" "),e("p",[e("strong",[s._v("一个个应用容器实例，比如订单微服务、库存微服务、mysql容器、nginx容器或者redis容器")])]),s._v(" "),e("h5",{attrs:{id:"工程-project"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#工程-project"}},[s._v("#")]),s._v(" 工程（project）")]),s._v(" "),e("p",[e("strong",[s._v("由一组关联的应用容器组成的一个完整业务单元，在 docker-compose.yml 文件中定义。")])]),s._v(" "),e("h3",{attrs:{id:"compose使用的三个步骤"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#compose使用的三个步骤"}},[s._v("#")]),s._v(" Compose使用的三个步骤")]),s._v(" "),e("ul",[e("li",[e("p",[e("strong",[s._v("编写Dockerfile定义各个微服务应用并构建出对应的镜像文件")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("使用 docker-compose.yml 定义一个完整业务单元，安排好整体应用中的各个容器服务。")])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("最后，执行docker-compose up命令 来启动并运行整个应用程序，完成一键部署上线")])])])]),s._v(" "),e("h3",{attrs:{id:"compose常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#compose常用命令"}},[s._v("#")]),s._v(" Compose常用命令")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" -h              "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看帮助")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" up              "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动所有docker-compose服务")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" up -d            "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动所有docker-compose服务并后台运行")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" down             "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止并删除容器、网络、卷、镜像。")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v("  yml里面的服务id        \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器实例内部 docker-compose exec docker-compose.yml文件中写的服务id /bin/bash")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 展示当前docker-compose编排过的运行的所有容器")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 展示当前docker-compose编排过的容器进程")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" logs  yml里面的服务id   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看容器输出日志")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" config   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查配置")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" config -q "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检查配置，有问题才有输出")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" restart  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启服务")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" start   "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker-compose")]),s._v(" stop    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止服务")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])])])}),[],!1,null,null,null);t.default=a.exports}}]);