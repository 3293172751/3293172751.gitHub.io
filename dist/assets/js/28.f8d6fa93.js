(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{744:function(s,a,e){"use strict";e.r(a);var t=e(5),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"_3主3从redis集群扩缩容配置案例说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3主3从redis集群扩缩容配置案例说明"}},[s._v("#")]),s._v(" 3主3从redis集群扩缩容配置案例说明")]),s._v(" "),e("p",[s._v("[toc]")]),s._v(" "),e("h3",{attrs:{id:"关闭防火墙-启动docker后台服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭防火墙-启动docker后台服务"}},[s._v("#")]),s._v(" 关闭防火墙+启动docker后台服务")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("systemctl strt docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"新建6个docker实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#新建6个docker实例"}},[s._v("#")]),s._v(" 新建6个docker实例")]),s._v(" "),e("blockquote",[e("p",[s._v("大规模的扩缩容，如何快速同时启动，docker提供了瞬间可达")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker run -d --name redis-node-1 --net host --privileged=true \\\n-v /data/redis/share/redis-node-1:/data \\\nredis:6.0.8 --cluster-enabled yes --appendonly yes --port 6381\n\ndocker run -d --name redis-node-2 --net host --privileged=true \\\n-v /data/redis/share/redis-node-2:/data \\\nredis:6.0.8 --cluster-enabled yes --appendonly yes --port 6382\n\ndocker run -d --name redis-node-3 --net host --privileged=true \\\n-v /data/redis/share/redis-node-3:/data \\\nredis:6.0.8 --cluster-enabled yes --appendonly yes --port 6383\n\ndocker run -d --name redis-node-4 --net host --privileged=true \\\n-v /data/redis/share/redis-node-4:/data \\\nredis:6.0.8 --cluster-enabled yes --appendonly yes --port 6384\n\ndocker run -d --name redis-node-5 --net host --privileged=true \\\n-v /data/redis/share/redis-node-5:/data \\\nredis:6.0.8 --cluster-enabled yes --appendonly yes --port 6385\n\ndocker run -d --name redis-node-6 --net host --privileged=true \\\n-v /data/redis/share/redis-node-6:/data \\\nredis:6.0.8 --cluster-enabled yes --appendonly yes --port 6386\n\ndocker ps\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2022/05/12/eEPbAR1yG45qDig.png",alt:"image-20220512164801906"}})]),s._v(" "),e("h3",{attrs:{id:"进入容器redis-node-1并为6台机器构建集群关系"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入容器redis-node-1并为6台机器构建集群关系"}},[s._v("#")]),s._v(" 进入容器redis-node-1并为6台机器构建集群关系")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker exec -it redis-node-1 /bin/bash\n\nifconfig #查看ip\t192.168.121.129\n\nredis-cli --cluster create 192.168.121.129:6381 192.168.121.129:6382 192.168.121.129:6383 192.168.121.129:6384 192.168.121.129:6385 192.168.121.129:6386 --cluster-replicas 1\n# --cluster-replicas 1表示为每一个master创建一个slave结点\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2022/05/12/AYPhgkbeuNwo3H5.png",alt:"image-20220512165806124"}})]),s._v(" "),e("ul",[e("li",[e("p",[s._v("Performing hash slots allocation on 6 nodes...哈希槽对六个结点进行分配")])]),s._v(" "),e("li",[e("p",[s._v("M：表示主机器（master主人）")])]),s._v(" "),e("li",[e("p",[s._v("S：表示从机器  （slaves奴隶）")])]),s._v(" "),e("li",[e("p",[s._v("yes接受分配~分配成功")]),s._v(" "),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2022/05/12/QKvfi9TmObY6cG4.png",alt:"image-20220512170053023"}})])])]),s._v(" "),e("p",[s._v("​")]),s._v(" "),e("h3",{attrs:{id:"以6381作为切入点-查看集群状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#以6381作为切入点-查看集群状态"}},[s._v("#")]),s._v(" 以6381作为切入点，查看集群状态")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("redis-cli -p 6381\ncluster info\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[s._v("cluster info查看槽位")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("root@ubuntu:/data"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-cli -p 6381")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" cluster info\ncluster_state:ok\ncluster_slots_assigned:16384\ncluster_slots_ok:16384\ncluster_slots_pfail:0\ncluster_slots_fail:0\ncluster_known_nodes:6\ncluster_size:3\ncluster_current_epoch:6\ncluster_my_epoch:1\ncluster_stats_messages_ping_sent:415\ncluster_stats_messages_pong_sent:422\ncluster_stats_messages_sent:837\ncluster_stats_messages_ping_received:417\ncluster_stats_messages_pong_received:415\ncluster_stats_messages_meet_received:5\ncluster_stats_messages_received:837\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" cluster nodes\n964043841e4c5519d3cde93cae6b32ebe5ba1830 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6381@16381 myself,master - "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652346428000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" connected "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-5460\n702a95b6eeb02a9d01d38152d599fdf57c70cf0c "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6386@16386 slave 447dba4f4813f9178d67e62488a4c4c5aba87635 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652346430721")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" connected\n125e88db573553be475175cd604eb9887506a121 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6385@16385 slave cc788412e2b72c5a3ea3ba5cd9c80197a554382f "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652346429000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" connected\ncc788412e2b72c5a3ea3ba5cd9c80197a554382f "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6382@16382 master - "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652346430000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" connected "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),s._v("-10922\n187c17cec8177135b6203328156bb7a7e73714d0 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6384@16384 slave 964043841e4c5519d3cde93cae6b32ebe5ba1830 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652346429715")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" connected\n447dba4f4813f9178d67e62488a4c4c5aba87635 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6383@16383 master - "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652346428707")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" connected "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10923")]),s._v("-16383\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])]),e("p",[e("strong",[s._v("1,2,3三台机器是master；4，5，6三台机器是slave")])]),s._v(" "),e("p",[e("strong",[s._v("1号主机挂4号，2号主机挂5号，3号挂6号，这个是随机分配的（为什么我的这莫巧我也不知道）")])]),s._v(" "),e("h3",{attrs:{id:"主从容错切换迁移案例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主从容错切换迁移案例"}},[s._v("#")]),s._v(" 主从容错切换迁移案例")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k1 "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" MOVED "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12706")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6383\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k1 v1\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" MOVED "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12706")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6383\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k2 v2\nOK\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k3 v3\nOK\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k4 v4\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" MOVED "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8455")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6382\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k5 v5\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("error"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" MOVED "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12582")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".121.129:6383\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1:638"),e("span",{pre:!0,attrs:{class:"token operator"}},[e("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" k6 v6\nOK\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("p",[e("strong",[s._v("在集群中这样用的话会失效，不能用单机版连接命令")])]),s._v(" "),e("p",[e("strong",[s._v("防止路由失效加参数"),e("code",[s._v("-c")]),s._v("并新增两个key")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("redis-cli -p 6381 -c\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("演示")])]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("root"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@ubuntu")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-cli -p 8381 -c")]),s._v("\nCould "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("connect")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" Redis at "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8381")]),s._v(": Connection refused\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("not")]),s._v(" connected"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("exit")]),s._v("\nroot"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@ubuntu")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("data")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# redis-cli -p 6381 -c")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" flushall\nOK\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" k1 v1\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" slot "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12706")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6383")]),s._v("\nOK\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6383")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" k2 v2\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" slot "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("449")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v("\nOK\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" k3 v3\nOK\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" k4 v4\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" slot "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8455")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6382")]),s._v("\nOK\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6382")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" k5 v5\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" slot "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12582")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6383")]),s._v("\nOK\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6383")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" k6 v6\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Redirected "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" slot "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("325")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" located at "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),s._v("\nOK\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("p",[e("strong",[s._v("即5号和6号slave不是在1号机，越界了，可以用"),e("code",[s._v("-c")]),s._v("集群化。会跳转到对应的redis")])]),s._v(" "),e("h3",{attrs:{id:"查看集群信息cluster-check"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看集群信息cluster-check"}},[s._v("#")]),s._v(" 查看集群信息cluster check")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("redis-cli --cluster check 192.168.121.129:6381\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("将第一台机器停掉")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker stop redis-node-1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://s2.loli.net/2022/05/12/LbkaB4OsQe12mv3.png",alt:"image-20220512180313934"}})]),s._v(" "),e("p",[e("strong",[s._v("此时1号宕机了，我们从二号开始作为突破")])]),s._v(" "),e("p",[e("strong",[s._v("我们查看集群状态")])]),s._v(" "),e("div",{staticClass:"language-sql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[e("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6382")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" cluster nodes\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("187")]),s._v("c17cec8177135b6203328156bb7a7e73714d0 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6384")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@16384")]),s._v(" master "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652349890155")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" connected "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5460")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("125")]),s._v("e88db573553be475175cd604eb9887506a121 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6385")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@16385")]),s._v(" slave cc788412e2b72c5a3ea3ba5cd9c80197a554382f "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652349891169")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" connected\ncc788412e2b72c5a3ea3ba5cd9c80197a554382f "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6382")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@16382")]),s._v(" myself"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("master "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652349890000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" connected "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5461")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10922")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("702")]),s._v("a95b6eeb02a9d01d38152d599fdf57c70cf0c "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6386")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@16386")]),s._v(" slave "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("447")]),s._v("dba4f4813f9178d67e62488a4c4c5aba87635 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652349892186")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" connected\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("447")]),s._v("dba4f4813f9178d67e62488a4c4c5aba87635 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6383")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@16383")]),s._v(" master "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652349889000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" connected "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10923")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("16383")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("964043841")]),s._v("e4c5519d3cde93cae6b32ebe5ba1830 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".121")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v(".129")]),s._v(":"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6381")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@16381")]),s._v(" master"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("fail "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652349736906")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1652349733000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" disconnected\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[e("strong",[s._v("结点1还活着,但是显示得是fail，此时6384上位，显示master，完成了集群迁移")])]),s._v(" "),e("p",[e("strong",[s._v("我们将6381恢复过来，再看看集群信息")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('root@ubuntu:/mysql/mydata/mysql-slave/conf# docker start redis-node-1\nredis-node-1\nroot@ubuntu:/mysql/mydata/mysql-slave/conf# docker ps |grep redis\n3b80844ec9cd   redis:6.0.8             "docker-entrypoint.s…"   About an hour ago   Up About an hour                                                                      redis-node-6\n1ed04c474cbf   redis:6.0.8             "docker-entrypoint.s…"   About an hour ago   Up About an hour                                                                      redis-node-5\nfa6e8cac6376   redis:6.0.8             "docker-entrypoint.s…"   About an hour ago   Up About an hour                                                                      redis-node-4\nde3446725228   redis:6.0.8             "docker-entrypoint.s…"   About an hour ago   Up About an hour                                                                      redis-node-3\nc6cdf1fbc619   redis:6.0.8             "docker-entrypoint.s…"   About an hour ago   Up About an hour                                                                      redis-node-2\nb6924b43bca4   redis:6.0.8             "docker-entrypoint.s…"   About an hour ago   Up 8 seconds                                                                          redis-node-1\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("p",[e("strong",[s._v("此时已经恢复过来了，我们查看节点状态")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("root@ubuntu:/data# redis-cli -p 6381 -c\n127.0.0.1:6381> cluster nodes\n125e88db573553be475175cd604eb9887506a121 192.168.121.129:6385@16385 slave cc788412e2b72c5a3ea3ba5cd9c80197a554382f 0 1652350295591 2 connected\n187c17cec8177135b6203328156bb7a7e73714d0 192.168.121.129:6384@16384 master - 0 1652350294577 7 connected 0-5460\n964043841e4c5519d3cde93cae6b32ebe5ba1830 192.168.121.129:6381@16381 myself,slave 187c17cec8177135b6203328156bb7a7e73714d0 0 1652350293000 7 connected\ncc788412e2b72c5a3ea3ba5cd9c80197a554382f 192.168.121.129:6382@16382 master - 0 1652350293000 2 connected 5461-10922\n447dba4f4813f9178d67e62488a4c4c5aba87635 192.168.121.129:6383@16383 master - 0 1652350292548 3 connected 10923-16383\n702a95b6eeb02a9d01d38152d599fdf57c70cf0c 192.168.121.129:6386@16386 slave 447dba4f4813f9178d67e62488a4c4c5aba87635 0 1652350296602 3 connected\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[e("strong",[s._v("可见1号机器虽然活过来了，但是成为从结点，奴隶结点了")])]),s._v(" "),e("p",[e("strong",[s._v("如果我们再把4号机停掉，给1号机器上位得机会，此时6381得1好机器依旧能回到主结点")])])])}),[],!1,null,null,null);a.default=n.exports}}]);