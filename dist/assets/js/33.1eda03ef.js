(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{768:function(s,a,n){"use strict";n.r(a);var t=n(5),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"dockerfile案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile案例"}},[s._v("#")]),s._v(" dockerfile案例")]),s._v(" "),n("p",[s._v("[toc]")]),s._v(" "),n("h3",{attrs:{id:"自定义镜像mycentosjava8"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义镜像mycentosjava8"}},[s._v("#")]),s._v(" 自定义镜像mycentosjava8")]),s._v(" "),n("h5",{attrs:{id:"要求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#要求"}},[s._v("#")]),s._v(" 要求：")]),s._v(" "),n("p",[s._v("·     自定义镜像mycentosjava8")]),s._v(" "),n("p",[s._v("·     要求")]),s._v(" "),n("p",[s._v("·     Centos7镜像具备vim+ifconfig+jdk8")]),s._v(" "),n("p",[s._v("·     JDK的下载镜像地址")]),s._v(" "),n("p",[s._v("·     官网")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.oracle.com/java/technologies/downloads/#java8",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载地址：https://www.oracle.com/java/technologies/downloads/#java8"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2022/05/13/LRMtS6w2PDBTxfQ.jpg",alt:"graphic"}})]),s._v(" "),n("p",[s._v("·     https://mirrors.yangxingzhen.com/jdk/")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("wget https://mirrors.yangxingzhen.com/jdk/jdk-8u20-linux-x64.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("·     编写")]),s._v(" "),n("p",[s._v("·     准备编写Dockerfile文件")]),s._v(" "),n("h5",{attrs:{id:"拉取镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[s._v("#")]),s._v(" 拉取镜像")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker run -d centos /bin/bash\ndocker ps\ndocker exec -it  7f569561ca8b /bin/bash \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h5",{attrs:{id:"验证环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#验证环境"}},[s._v("#")]),s._v(" 验证环境")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("mkdir /myfile\ncd /myfile && mkdir Dockerfile\n# root@ubuntu:/myfile# ls\n# Dockerfile  index.html  jdk-8u171-linux-x64.tar.gz\n# https://mirrors.yangxingzhen.com/jdk/jdk-8u171-linux-x64.tar.gz\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h5",{attrs:{id:"构建一些增强型功能-编写dockerfile文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建一些增强型功能-编写dockerfile文件"}},[s._v("#")]),s._v(" 构建一些增强型功能–编写dockerfile文件")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[s._v("from centos\nMAINTAINER xiongxinwei"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("3293172751nss@gmail.com"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\nENV mypath /usr/local\nWORKDIR "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$mypath")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装vim")]),s._v("\nRUN yum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装ifconfig命令查看网络")]),s._v("\nRUN yum -y "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" net-tools\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装java8以及lib库")]),s._v("\nRUN "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /usr/local/java\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ADD 是把相对路径jar，把jdk添加到容器中，安装包必须要和dockerfile文件在同一位置")]),s._v("\nADD jdk-8u171-linux-x64.tar.gz /usr/local/java/\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#配置java环境变量")]),s._v("\nENV JAVA_HOME /usr/local/java/jdk1.8.0_171\nENV JRE_HOME "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/jre\nENV CLASSPATH "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/dt.jar:"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/lib/tools.jar:"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JRE_HOME")]),s._v("/lib:"),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$CLASSPATH")]),s._v("\nENV "),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$JAVA_HOME")]),s._v("/bin:"),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 端口")]),s._v("\nEXPOSE "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n\nCMD "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$MYPATH")]),s._v("\nCMD "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"success--------------ok"')]),s._v("\nCMD /bin/bash\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("p",[n("strong",[s._v("注意：")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("大写字母D")])]),s._v(" "),n("li",[n("p",[s._v("构建")])]),s._v(" "),n("li",[n("p",[s._v("docker build -t 新镜像名字:TAG .")])])]),s._v(" "),n("h5",{attrs:{id:"构建编写的dockerfile-生成新的镜像"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#构建编写的dockerfile-生成新的镜像"}},[s._v("#")]),s._v(" 构建编写的dockerfile，生成新的镜像")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("vim Dockerfile\ndocker build -t centosjava8:1.5 .\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("公式：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker build -f dockerfile文件 -t 新镜像名称:TAG .\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("注意，上面TAG后面有个空格，有个点")])]),s._v(" "),n("h5",{attrs:{id:"运行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[s._v("#")]),s._v(" 运行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker run -it 新镜像名字:TAG\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"最后"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[s._v("#")]),s._v(" 最后")]),s._v(" "),n("h5",{attrs:{id:"再体会下unionfs-联合文件系统"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#再体会下unionfs-联合文件系统"}},[s._v("#")]),s._v(" 再体会下UnionFS（联合文件系统）")]),s._v(" "),n("p",[n("strong",[s._v("UnionFS（联合文件系统）：Union文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持对文件系统的修改作为一次提交来一层层的叠加，同时可以将不同目录挂载到同一个虚拟文件系统下(unite several directories into a single virtual filesystem)。Union 文件系统是 Docker 镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（没有父镜像），可以制作各种具体的应用镜像。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://s2.loli.net/2022/05/13/agpGsZwy8PCoBLU.jpg",alt:"graphic"}})]),s._v(" "),n("p",[n("strong",[s._v("特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录")])])])}),[],!1,null,null,null);a.default=e.exports}}]);